"use strict";document.querySelector("[data-crm-widget=form]").addEventListener("ready",function(){$(formElementCRM.subjectCrmID).find("option[value=0]").text("Please select one of the following"),formMethod.setObserver(formElementCRM.emailCrmID),formMethod.setObserver(formElementCRM.phoneCrmID),formMethod.setObserver(formElementCRM.instructionCrmID),crmJQuery(formElementCRM.fileUploadCrmAttr).on("click",function(){crmJQuery(formElementCRM.fileUploadCrmID).click()}),storageMethod.loadData()});var formElementCRM={typeWorkCrmID:"#essayform-type_of_work",levelWorkCrmID:"#essayform-level_work",subjectCrmID:"#essayform-paper_subject",urgencyCrmID:"#essayform-urgency",emailCrmID:"#essayform-email",phoneCrmID:"#essayform-phone",fileUploadCrmID:"#essayform-file",instructionCrmID:"#essayform-instruction",fieldEssayformEmailCrmClass:".field-essayform-email",fileUploadCrmAttr:'[data-role="dropZone"]',orderSubmit:'[type="submit"]'},formElement={loaderIos:".loader-ios"},previewElement={previewRowHeadUpload:".pgpreview-row__head--upload",previewRowInfoUpload:".pgpreview-row__info--upload"},formMethod={triggerCrmInput:function(e,r){crmJQuery(e).trigger(r)},validateCrm:function(e){crmJQuery("#orderForm").yiiActiveForm("validateAttribute",e)},setObserver:function(e){var r=document.querySelector(e);new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(e){e.forEach(function(e){document.querySelector(".has-error")?$("html, body").animate({scrollTop:$(".has-error").first().offset().top-30},150):storageMethod.saveData()})}).observe(r,{attributes:!0,attributeFilter:["aria-invalid"]})}},storageMethod={saveData:function(){var e=$("#orderForm").find("input, select, textarea").not("[type=hidden]").serializeArray(),r=JSON.stringify(e);sessionStorage.setItem("form-data",r)},loadData:function(){var e=sessionStorage.getItem("form-data");if(e){var r=JSON.parse(e),t=$("[data-crm-widget=form]");$.each(r,function(e,r){var o=r.name,a=r.value,i=$('[name="'.concat(o,'"]')),n=i.last().attr("type"),m=i.prop("tagName");"SELECT"===m&&(n="select"),"TEXTAREA"===m&&(n="textarea");var s=["select","text","textarea","email"];-1!==$.inArray(n,s)&&t.find('[name="'.concat(o,'"]')).val(a),"radio"===n&&t.find('[name="'.concat(o,'"][value="').concat(a,'"]')).prop("checked",!0),"checkbox"===n&&"1"===a&&t.find('[name="'.concat(o,'"]')).prop("checked",!0)})}}};