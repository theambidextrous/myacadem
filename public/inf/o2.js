document.querySelector("[data-crm-widget=form]").addEventListener("ready",function(){$(".accordion-form").on("click",".btn-next",function(e){e.preventDefault();var o=$(this).is("#btn_step_1"),r=$(this).is("#btn_step_2"),s=$(this).is("#btn_step_3"),t=$(this);if(o&&(crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-email"),crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-terms"),crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-paper_subject"),setTimeout(function(){if(document.querySelector(".has-error"))$(".field-essayform-paper_subject .help-block").show(),$("html, body").animate({scrollTop:$(".has-error").first().offset().top-30},500);else{var e=t.closest("li");$(e).prevAll().removeClass("current"),$(e).addClass("complete").removeClass("active").next("li").addClass("active current");var o=$("#form__steps-1").position();$("html, body").animate({scrollTop:o.top+70},600)}},300)),jQuery(function(e){e(".steps__accordion").click(function(){e(".steps__accordion").removeClass("active-accardion"),e(this).addClass("active-accardion"),"block"==e(this).next(".steps__panel").css("display")?e(this).next(".steps__panel").slideUp(600):(e(".steps__panel").slideUp(600),e(this).next(".steps__panel").slideDown(600))})}),r){var a=document.getElementById("essayform-instruction").value;if(/\w{1,15}/.test(a)){var i=$(this).closest("li");$(i).prevAll().removeClass("current"),$(i).addClass("complete").removeClass("active").next("li").addClass("active current"),$(".accordion-sidebar__payments").show(),$(".accordion-form__cards").hide();var c=$("#form__steps-2").position();$("html, body").animate({scrollTop:c.top+61},600)}else crmJQuery("#essayform-instruction").focus().blur()}if(s){i=$(this).closest("li");$(i).prevAll().removeClass("current"),$(i).addClass("complete").removeClass("active").next("li").addClass("active current");var n=$("#form__steps-3").position();$("html, body").animate({scrollTop:n.top+61},600)}}).on("click","li.complete .accordion-form__steps-meta, li.current .accordion-form__steps-meta",function(e){e.preventDefault(),crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-email"),crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-terms"),crmJQuery("#orderForm").yiiActiveForm("validateAttribute","essayform-instruction"),$this=$(this),setTimeout(function(){if(!document.querySelector(".has-error")){var e=$this.closest("li");$(e).addClass("active").siblings("li.active").removeClass("active"),null!==sessionStorage.getItem("autocompleteForms")&&sessionStorage.removeItem("autocompleteForms")}},300)}),new Selectr(document.getElementById("essayform-paper_subject")),$('[data-role="dropZone"]').click(function(e){$('input[type="file"]').click()}),$("#essayform-type_of_work").ready(function(){var e=$(".field-essayform-as-admission_help"),o=$("#essayform-type_of_work option:selected"),r=o.text();3===Number(o.val())?e.show():e.hide(),$(".accordion-sidebar__top-item--type").html(r);var s=crmJQuery("#essayform-type_of_work").val();crmJQuery('#essayform-type_of_work optgroup[label="Most popular types"]').find('option[value="'+s+'"]').prop("selected",!0),$("#essayform-type_of_work").trigger("change")}),$("#essayform-type_of_work").change(function(){var e,o=$(".field-essayform-as-admission_help"),r=$("#essayform-type_of_work option:selected"),s=r.text();3===Number(r.val())?o.show():o.hide(),$(".accordion-sidebar__top-item--type").html(s),e=$("#essayform-level_work input[type=radio]:checked").parent().text(),$(".accordion-sidebar__top-item--level").html(e),$("#essayform-level_work label").removeClass("active"),$("#essayform-level_work input[type=radio]:checked").parent().addClass("active")}),$("#essayform-level_work").ready(function(){var e=$("#essayform-level_work input[type=radio]:checked").parent().text();$(".accordion-sidebar__top-item--level").html(e)}),$("#essayform-level_work input[type=radio]").change(function(){var e=$("#essayform-level_work input[type=radio]:checked").parent().text();$(".accordion-sidebar__top-item--level").html(e)});var o="";function e(){if($("#essayform-as-admission_help").is(":checked")){var e=document.forms.orderForm;fetch("https://hooks.zapier.com/hooks/catch/5352559/ooz3rm4/",{method:"POST",body:new FormData(e)}).then(function(e){console.log("Success!",e)}).catch(function(e){console.error("Error!",e.message)}),fetch("https://hooks.zapier.com/hooks/catch/5401576/ooft44v/",{method:"POST",body:new FormData(e)}).then(function(e){console.log("Success 2!",e)}).catch(function(e){console.error("Error!",e.message)})}}$("#essayform-as-single_spaced").ready(function(){o=$("#essayform-as-single_spaced").is(":checked")?"single-spaced":"double-spaced"}),$("#essayform-as-single_spaced").change(function(){o=$("#essayform-as-single_spaced").is(":checked")?"single-spaced":"double-spaced",$("#essayform-number_page").trigger("change")}),$("#essayform-number_page").ready(function(){var e=$("#essayform-number_page").val();"1"!==e?$(".accordion-preview__item--pages").html(e+" pages/"+o):$(".accordion-preview__item--pages").html(e+" page/"+o)}),$(".ui-spinner-button").click(function(){var e=$("#essayform-number_page").val();"1"!==e?$(".accordion-preview__item--pages").html(e+" pages/"+o):$(".accordion-preview__item--pages").html(e+" page/"+o)}),$("#essayform-number_page").change(function(){var e=$("#essayform-number_page").val();"1"!==e?$(".accordion-preview__item--pages").html(e+" pages/"+o):$(".accordion-preview__item--pages").html(e+" page/"+o)}),$("#essayform-urgency").ready(function(){var e=$("#essayform-urgency option:selected").text();$(".accordion-preview__item--urgency").html(e)}),$("#essayform-urgency").change(function(){var e=$("#essayform-urgency option:selected").text();$(".accordion-preview__item--urgency").html(e)}),$("#essayform-urgency").ready(function(){var e=$("#essayform-urgency option:selected").val();243==e||242==e?$(".accordion-form__urgency_notice").addClass("notice-active"):$(".accordion-form__urgency_notice").removeClass("notice-active")}),$("#essayform-urgency").on("change",function(){var e=$("#essayform-urgency option:selected").val();243==e||242==e?$(".accordion-form__urgency_notice").addClass("notice-active"):$(".accordion-form__urgency_notice").removeClass("notice-active")}),$("#essayform-level_work input[type=radio]:checked").closest("label").addClass("active"),$("#essayform-level_work label").click(function(){$("#essayform-level_work label").removeClass("active"),$(this).addClass("active")}),$("#essayform-language_work input[type=radio]:checked").closest("label").addClass("active"),$("#essayform-language_work label").click(function(){$("#essayform-language_work label").removeClass("active"),$(this).addClass("active")}),$('label[for="essayform-type_code"]').click(function(){$(this).toggleClass("opened"),$("#essayform-code").toggle()}),$(".accordion-form__promo-mobile .promo-mobile-row").hide(),$(".accordion-form__promo-mobile-label").click(function(){$(this).toggleClass("opened"),$(".promo-mobile-row").toggle()}),$("#essayform-code").each(function(){this.onclick=function(){}}),$("#essayform-code").click(function(){var e=0,o=window.setInterval(function(){10<e&&clearInterval(o),$("#essayform-code").focus(),e++},50)}),$(window).on("resize",function(){var e,o,r;e=".field-essayform-code",o=".accordion-sidebar__promo",r=".promo-mobile-row",$(window).width()<=1023?($(e).appendTo(r),$(".accordion-form__promo-mobile #essayform-code").hide()):($(e).appendTo(o),$(".accordion-sidebar__promo #essayform-code").hide())}).resize(),$(".js-submit-btn").on("click",function(){e(),document.querySelector(".has-error")||($(this).addClass("submit-loader"),s()),$('#orderForm input[name="form-payment-method"]:checked').next(".accordion-form__method-label").find("a")[0].click()}),$(".js-submit-btn-desktop").on("click",function(){e(),document.querySelector(".has-error")||($(this).addClass("submit-loader"),s()),$('#orderForm input[name="form-payment-method2"]:checked').next(".accordion-form__method-label").find("a")[0].click()});var r=0;function s(){sessionStorage.setItem("autocompleteForms",!0)}$('[data-role="directPay"]').on("visibility",function(){var e=$(this);setInterval(function(){e.is(":hidden")?($(".js-submit-btn").show(),$(".accordion-form__payments").show(),$(".accordion-form__payments-title").show(),r=0):0==r&&(r=1,$(".js-submit-btn").hide(),$(".accordion-form__payments").hide(),$(".accordion-form__payments-title").hide())},100)}).trigger("visibility"),$("#essayform-as-top_writer").prop("checked",!1),$("#essayform-as-premium_writer").prop("checked",!1),crmJQuery("#essayform-as-top_writer").trigger("change"),crmJQuery("#essayform-as-premium_writer").trigger("change"),$("#writerDeafault").on("click",function(){$(".writers__item").removeClass("active"),$(this).addClass("active"),$("#essayform-as-top_writer").prop("checked",!1),$("#essayform-as-premium_writer").prop("checked",!1),crmJQuery("#essayform-as-top_writer").trigger("change"),crmJQuery("#essayform-as-premium_writer").trigger("change")}),$("#writerTop").on("click",function(){$(".writers__item").removeClass("active"),$(this).addClass("active"),$("#essayform-as-top_writer").prop("checked",!0),$("#essayform-as-premium_writer").prop("checked",!1),crmJQuery("#essayform-as-top_writer").trigger("change"),crmJQuery("#essayform-as-premium_writer").trigger("change")}),$("#writerPremium").on("click",function(){$(".writers__item").removeClass("active"),$(this).addClass("active"),$("#essayform-as-top_writer").prop("checked",!1),$("#essayform-as-premium_writer").prop("checked",!0),crmJQuery("#essayform-as-top_writer").trigger("change"),crmJQuery("#essayform-as-premium_writer").trigger("change")}),$(".js-cpp").bind("DOMSubtreeModified",function(){var e,o,r=$('.js-cpp [data-label="cpp"]').text().replace(/[^\d.]/g,"");e=(r-70*r/100).toFixed(2),o=(r-40*r/100).toFixed(2),isNaN(r)?($(".js-writers__price").hide(),$(".loader-ios").show()):($("#topPrice").text("+ $"+e),$("#premiumPrice").text("+ $"+o),$(".js-writers__price").show(),$(".loader-ios").hide())}),$(window).on("scroll",function(){var e=$(window).height(),o=$(window).scrollTop(),r=$(".info").offset().top;(r-=e)<=o?$("#mobile-scroll").css({position:"static"}):$("#mobile-scroll").css({position:"fixed",bottom:0})}),$(window).on("scroll",function(){var e=$(window).scrollTop(),o=$(".accordion-form"),r=$(".accordion-sidebar__wrap"),s=o.offset().top,t=o.height(),a=r.height(),i=t-a+"px",c=t-a+s;e<s?(r.removeClass("sidebar-fixed"),r.removeClass("sidebar-fixed--max"),r.css({top:"0"})):c<=e?(r.removeClass("sidebar-fixed"),r.addClass("sidebar-fixed--max"),$(".sidebar-fixed--max").css({top:i})):(r.removeClass("sidebar-fixed--max"),r.addClass("sidebar-fixed").css({top:"15px"}))}),$("body").click(function(){$(".of-popup-overlay").click(function(){$(this).parent("#of-tos-popup-container").css("display","none")})}),$("#essayform-terms").prop("checked",!1),$("#essayform-as-sms_info").prop("checked",!1),$(".accordion-form__steps-wrap input[type=checkbox]").prop("checked",!1),$("select").on("change",function(){var e=$(this);!function(r,e){var o=JSON.parse(sessionStorage.getItem("crm_select_data")),s={id:r,value:e};if("-1"!=e&&null!=o){var t=null;$(o).each(function(e,o){o.id==r&&(t=e)}),null!=t?o[t]=s:o.push(s),sessionStorage.setItem("crm_select_data",JSON.stringify(o))}else sessionStorage.setItem("crm_select_data",JSON.stringify([s]))}(e.attr("name"),e.val())}),$('[role="radiogroup"]').on("click",function(){var e=$(this);!function(r,e){var o=JSON.parse(sessionStorage.getItem("crm_radiogroup_data")),s={id:r,value:e};if("-1"!=e&&null!=o){var t=null;$(o).each(function(e,o){o.id==r&&(t=e)}),null!=t?o[t]=s:o.push(s),sessionStorage.setItem("crm_radiogroup_data",JSON.stringify(o))}else sessionStorage.setItem("crm_radiogroup_data",JSON.stringify([s]))}(e.attr("id"),e.find(".active > input").val())}),$(".accordion-form__steps-wrap input[type=checkbox]").on("click",function(){var e,o,r=$(this).attr("id"),s=!1,t=JSON.parse(sessionStorage.getItem("crm_step_data"));null!=t&&t.forEach(function(e,o){e===r&&(t.splice(o,1),sessionStorage.removeItem("crm_step_data"),t.length&&sessionStorage.setItem("crm_step_data",JSON.stringify(t)),s=!0)}),s||(e=r,(o=JSON.parse(sessionStorage.getItem("crm_step_data"))||[]).push(e),sessionStorage.setItem("crm_step_data",JSON.stringify(o)))}),$(".field-essayform-email").on("click change input keyup",function(){var e=$("#essayform-email");sessionStorage.setItem("crm_email_data",e.val())}),$(".field-essayform-number_of_source").on("click change input keyup",function(){var e=$("#essayform-number_of_source");sessionStorage.setItem("crm_number_of_source_data",e.val())}),$(".writers").on("click",function(){var e=$(this).find(".active").attr("id");sessionStorage.setItem("crm_writers_data",e)}),$(".accordion-form__payments").on("click",function(){var e=$(".accordion-sidebar__payments input[type=radio]:checked").attr("id");sessionStorage.setItem("crm_payments_data",e)}),$("#essayform-as-sms_info").on("click",function(){var e=$(this).attr("id");null!=sessionStorage.getItem("crm_sms_info_data")?sessionStorage.removeItem("crm_sms_info_data"):sessionStorage.setItem("crm_sms_info_data",e)}),null!==sessionStorage.getItem("autocompleteForms")&&function(){(function(){var e=JSON.parse(sessionStorage.getItem("crm_select_data"));null!=e&&$(e).each(function(e,o){$("[name='"+o.id+"']").val(o.value)})})(),function(){var e=JSON.parse(sessionStorage.getItem("crm_radiogroup_data"));null!=e&&$(e).each(function(e,o){$("#"+o.id+' :input[value="'+o.value+'"]').click()})}(),function(){var o=JSON.parse(sessionStorage.getItem("crm_step_data"));null!=o&&$(o).each(function(e){$("#"+o[e]).prop("checked",!0)})}(),function(){var e=sessionStorage.getItem("crm_email_data");null!=e&&$("#essayform-email").val(e)}(),function(){var e=sessionStorage.getItem("crm_number_of_source_data");null!=e&&$("#essayform-number_of_source").val(e)}(),function(){var e=sessionStorage.getItem("crm_sms_info_data");$("#"+e).prop("checked",!0)}(),function(){var e=sessionStorage.getItem("crm_writers_data");$("#"+e).click()}(),function(){var e=sessionStorage.getItem("crm_payments_data");$("#"+e).prop("checked",!0)}(),$("#essayform-terms").prop("checked",!0),$("#form__steps-1").removeClass("active current").addClass("complete"),$("#form__steps-2").removeClass("active current").addClass("complete"),1023<$(window).width()?$("#form__steps-3").addClass("active"):($("#form__steps-3").removeClass("active current").addClass("complete"),$("#form__steps-4").addClass("active"));setTimeout(function(){$(".accordion-sidebar__payments").show(),$(".accordion-form__cards").hide()},300)}()});